<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Test Results</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: black;
            color: whitesmoke;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        h2 {
            font-size: 1.5em;
            margin: 20px 0;
            text-align: center;
        }

        table {
            width: 90%;
            max-width: 800px;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #1a1a1a;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        thead {
            background-color: #2a2a2a;
        }

        th, td {
            padding: 15px;
            text-align: left;
            font-size: 0.9em;
        }

        th {
            color: #71B7FB;
        }

        tr:nth-child(even) {
            background-color: #333;
        }

        tr:nth-child(odd) {
            background-color: #2a2a2a;
        }

        td {
            color: whitesmoke;
        }

        input[type="number"] {
            padding: 5px;
            font-size: 0.9em;
            width: 60px;
            border: 2px solid #333;
            border-radius: 5px;
            background-color: black;
            color: white;
        }

        button {
    background-color: #71B7FB;
    color: white;
    padding: 8px 12px;
    font-size: 0.875em;
    width: auto; 
    border: none;
    border-radius: 4px; 
    cursor: pointer;
    margin: 15px auto; 
    display: block; 
    transition: background-color 0.3s ease, transform 0.2s ease;
}

button:hover {
    background-color: #559DDC; 
    transform: scale(1.05);
}

        .info-icon {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin-left: 8px;
    color: #71B7FB;
    cursor: pointer;
    font-weight: bold;
    border: 1px solid #71B7FB;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    font-size: 12px;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.info-icon:hover {
    background-color: #71B7FB;
    color: #ffffff;
}


        .info-popup {
            display: none;
            position: absolute;
            background-color: #2a2a2a;
            color: white;
            padding: 10px;
            border: 1px solid #71B7FB;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        @media (max-width: 768px) {
            table {
                display: block;
                width: 100%;
            }

            thead {
                display: none;
            }

            tbody {
                display: block;
            }

            tr {
                display: block;
                margin-bottom: 15px;
                border: 1px solid #333;
                border-radius: 10px;
                background-color: #1a1a1a;
                padding: 10px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            }

            td {
                display: flex;
                justify-content: space-between;
                padding: 10px;
                font-size: 0.9em;
                border-bottom: 1px solid #333;
            }

            td:last-child {
                border-bottom: none;
            }

            td::before {
                content: attr(data-label);
                font-weight: bold;
                color: #71B7FB;
            }
        }
    </style>
    <script>
        function toggleInfo(test) {
            const popup = document.getElementById(`info-popup-${test}`);
            if (popup.style.display === 'block') {
                popup.style.display = 'none';
            } else {
                popup.style.display = 'block';
            }
        }
    </script>
</head>
<body>
    {% set reference_ranges = {
        "Haemoglobin": "13-17",
        "Total RBC Count": "4.5-5.5",
        "Packed Cell Volume / Hematocrit": "40-50",
        "MCV": "83-101",
        "MCH": "27-32",
        "MCHC": "31.5-34.5",
        "RDW": "11.6-14",
        "Total Leucocytes Count": "4000-10,000",
        "Neutrophils": "40-80",
        "Lymphocytes": "20-40",
        "Eosinophils": "1-6",
        "Monocytes": "2-10",
        "Basophils": "0-2",
        "Absolute Neutrophil Count": "2500-7000",
        "Absolute Lymphocyte Count": "1000-3000",
        "Absolute Eosinophil Count": "20-500",
        "Absolute Monocyte Count": "200-1000",
        "Platelet Count": "150,000-410,000",
        "Erythrocyte Sedimentation Rate": "0-15",
        "Fasting Plasma Glucose": "70-100",
        "Glycated Hemoglobin": "< 5.7",
        "Triglycerides": "< 150",
        "Total Cholesterol": "< 200",
        "LDL Cholesterol": "< 100",
        "HDL Cholesterol": "> 60",
        "VLDL Cholesterol": "5-30",
        "Total Cholesterol / HDL Cholesterol Ratio": "< 4.5",
        "LDL Cholesterol / HDL Cholesterol Ratio": "< 3.0",
        "Total Bilirubin": "0.3-1.2",
        "Direct Bilirubin": "< 0.2",
        "Indirect Bilirubin": "0.3-1",
        "SGPT/ALT": "0-50",
        "SGOT/AST": "0-50",
        "Alkaline Phosphatase": "43-115",
        "Total Protein": "6.6-8.3",
        "Albumin": "3.5-5.2",
        "Globulin": "1.8-3.6",
        "Protein A/G Ratio": "0.8-2.0",
        "Gamma Glutamyl Transferase": "0-55",
        "Creatinine": "0.7-1.2",
        "e-GFR (Glomerular Filtration Rate)": "> 90 mL/min/1.73m²",
        "Urea": "17-43",
        "Blood Urea Nitrogen": "8-20",
        "Uric Acid": "3.5-7.2",
        "T3 Total": "0.6-1.81",
        "T4 Total": "3.2-12.6",
        "TSH Ultrasensitive": "0.55-4.78",
        "Vitamin B12": "211-911",
        "25 (OH) Vitamin D2 (Ergocalciferol)": "20-50",
        "25 (OH) Vitamin D3 (Cholecalciferol)": "20-50",
        "Vitamin D Total (D2 + D3)": "30-100",
        "Iron": "70-180",
        "Total Iron Binding Capacity": "244-450",
        "Transferrin Saturation": "18-40"
    }
%}
    {% set units = {
        "Haemoglobin": "gm/dL",
        "Total RBC Count": "cells/cumm",
        "Packed Cell Volume / Hematocrit": "%",
        "MCV": "fL",
        "MCH": "pg",
        "MCHC": "gm/dL",
        "RDW": "%",
        "Total Leucocytes Count": "cells/cumm",
        "Neutrophils": "%",
        "Lymphocytes": "%",
        "Eosinophils": "%",
        "Monocytes": "%",
        "Basophils": "%",
        "Absolute Neutrophil Count": "cells/cumm",
        "Absolute Lymphocyte Count": "cells/cumm",
        "Absolute Eosinophil Count": "cells/cumm",
        "Absolute Monocyte Count": "cells/cumm",
        "Platelet Count": "cells/cumm",
        "Erythrocyte Sedimentation Rate": "mm/hr",
        "Fasting Plasma Glucose": "mg/dL",
        "Glycated Hemoglobin": "%",
        "Triglycerides": "mg/dL",
        "Total Cholesterol": "mg/dL",
        "LDL Cholesterol": "mg/dL",
        "HDL Cholesterol": "mg/dL",
        "VLDL Cholesterol": "mg/dL",
        "Total Cholesterol / HDL Cholesterol Ratio": "ratio",
        "LDL Cholesterol / HDL Cholesterol Ratio": "ratio",
        "Total Bilirubin": "mg/dL",
        "Direct Bilirubin": "mg/dL",
        "Indirect Bilirubin": "mg/dL",
        "SGPT/ALT": "U/L",
        "SGOT/AST": "U/L",
        "Alkaline Phosphatase": "U/L",
        "Total Protein": "gm/dL",
        "Albumin": "gm/dL",
        "Globulin": "gm/dL",
        "Protein A/G Ratio": "ratio",
        "Gamma Glutamyl Transferase": "U/L",
        "Creatinine": "mg/dL",
        "e-GFR (Glomerular Filtration Rate)": "mL/min/1.73m²",
        "Urea": "mg/dL",
        "Blood Urea Nitrogen": "mg/dL",
        "Uric Acid": "mg/dL",
        "T3 Total": "ng/ml",
        "T4 Total": "µg/dL",
        "TSH Ultrasensitive": "µIU/mL",
        "Vitamin B12": "pg/mL",
        "25 (OH) Vitamin D2 (Ergocalciferol)": "ng/mL",
        "25 (OH) Vitamin D3 (Cholecalciferol)": "ng/mL",
        "Vitamin D Total (D2 + D3)": "ng/mL",
        "Iron": "µg/dL",
        "Total Iron Binding Capacity": "µg/dL",
        "Transferrin Saturation": "%"
    }
     %}
    {% set explanations = {
        "Haemoglobin": "A protein in red blood cells that carries oxygen throughout the body.",
        "Total RBC Count": "The number of red blood cells in a given volume of blood.",
        "Packed Cell Volume / Hematocrit": "The percentage of blood volume occupied by red blood cells.",
        "MCV": "Mean Corpuscular Volume - the average volume of a red blood cell.",
        "MCH": "Mean Corpuscular Hemoglobin - the average amount of hemoglobin in a single red blood cell.",
        "MCHC": "Mean Corpuscular Hemoglobin Concentration - the average concentration of hemoglobin in a given volume of red blood cells.",
        "RDW": "Red Cell Distribution Width - a measure of the variation in the size of red blood cells.",
        "Total Leucocytes Count": "The total number of white blood cells in a given volume of blood.",
        "Neutrophils": "A type of white blood cell that helps fight infections.",
        "Lymphocytes": "A type of white blood cell involved in the immune response.",
        "Eosinophils": "A type of white blood cell that helps combat parasitic infections and is involved in allergic reactions.",
        "Monocytes": "A type of white blood cell that helps break down bacteria.",
        "Basophils": "A type of white blood cell involved in inflammatory responses and allergic reactions.",
        "Absolute Neutrophil Count": "The absolute number of neutrophils in a given volume of blood.",
        "Absolute Lymphocyte Count": "The absolute number of lymphocytes in a given volume of blood.",
        "Absolute Eosinophil Count": "The absolute number of eosinophils in a given volume of blood.",
        "Absolute Monocyte Count": "The absolute number of monocytes in a given volume of blood.",
        "Platelet Count": "The number of platelets in a given volume of blood, important for blood clotting.",
        "Erythrocyte Sedimentation Rate": "A test that measures how quickly red blood cells settle at the bottom of a test tube.",
        "Fasting Plasma Glucose": "The level of glucose in the blood after fasting for at least 8 hours.",
        "Glycated Hemoglobin": "Hemoglobin that has glucose attached, indicating average blood sugar levels over the past 2-3 months.",
        "Triglycerides": "A type of fat found in the blood, used for energy.",
        "Total Cholesterol": "The total amount of cholesterol in the blood.",
        "LDL Cholesterol": "Low-Density Lipoprotein - 'bad' cholesterol that can build up in the arteries.",
        "HDL Cholesterol": "High-Density Lipoprotein - 'good' cholesterol that helps remove LDL cholesterol from the arteries.",
        "VLDL Cholesterol": "Very Low-Density Lipoprotein - a type of lipoprotein that carries triglycerides in the blood.",
        "Total Cholesterol / HDL Cholesterol Ratio": "A ratio used to estimate the risk of heart disease.",
        "LDL Cholesterol / HDL Cholesterol Ratio": "A ratio used to estimate the risk of heart disease.",
        "Total Bilirubin": "A substance produced by the breakdown of red blood cells.",
        "Direct Bilirubin": "The form of bilirubin that is processed by the liver and excreted in bile.",
        "Indirect Bilirubin": "The form of bilirubin that is not processed by the liver.",
        "SGPT/ALT": "Serum Glutamic Pyruvic Transaminase / Alanine Aminotransferase - enzymes found in the liver, elevated levels may indicate liver damage.",
        "SGOT/AST": "Serum Glutamic Oxaloacetic Transaminase / Aspartate Aminotransferase - enzymes found in the liver and heart, elevated levels may indicate liver or heart damage.",
        "Alkaline Phosphatase": "An enzyme found in the liver and bones, elevated levels may indicate liver or bone disease.",
        "Total Protein": "The total amount of protein in the blood.",
        "Albumin": "The main protein in blood plasma, important for maintaining blood volume and pressure.",
        "Globulin": "A group of proteins in the blood, including antibodies.",
        "Protein A/G Ratio": "The ratio of albumin to globulin in the blood.",
        "Gamma Glutamyl Transferase": "An enzyme found in the liver, elevated levels may indicate liver disease.",
        "Creatinine": "A waste product produced by muscles, used to assess kidney function.",
        "e-GFR (Glomerular Filtration Rate)": "A measure of how well the kidneys filter blood.",
        "Urea": "A waste product produced by the liver, used to assess kidney function.",
        "Blood Urea Nitrogen": "A measure of the amount of nitrogen in the blood in the form of urea.",
        "Uric Acid": "A waste product produced by the breakdown of purines, used to assess kidney function.",
        "T3 Total": "Total Triiodothyronine - a hormone produced by the thyroid gland, used to assess thyroid function.",
        "T4 Total": "Total Thyroxine - a hormone produced by the thyroid gland, used to assess thyroid function.",
        "TSH Ultrasensitive": "Thyroid-Stimulating Hormone - a hormone that stimulates the thyroid gland, used to assess thyroid function.",
        "Vitamin B12": "A vitamin important for red blood cell production and nerve function.",
        "25 (OH) Vitamin D2 (Ergocalciferol)": "A form of vitamin D obtained from plant sources and supplements.",
        "25 (OH) Vitamin D3 (Cholecalciferol)": "A form of vitamin D obtained from animal sources and sunlight exposure.",
        "Vitamin D Total (D2 + D3)": "The total amount of vitamin D in the blood, including both D2 and D3.",
        "Iron": "A mineral important for red blood cell production and oxygen transport.",
        "Total Iron Binding Capacity": "A measure of the blood's ability to bind and transport iron.",
        "Transferrin Saturation": "The percentage of transferrin (an iron-binding protein) that is saturated with iron."
    }
    %}
    <div class="container">
        <h2>Your Health Report</h2>
        <form action="/uploads" method="POST">
            <table>
                <thead>
                    <tr>
                        <th>Test</th>
                        <th>Result</th>
                        <th>Unit</th>
                        <th>Reference Interval</th>
                    </tr>
                </thead>
                <tbody>
                    {% for test, value in values.items() %}
                    <tr>
                        <td data-label="Test">
                            {{ test }}
                            <span class="info-icon" onclick="toggleInfo('{{ test }}')">i</span>
                            <div class="info-popup" id="info-popup-{{ test }}">
                                {{ explanations[test] }}
                            </div>
                        </td>
                        <td data-label="Result"><input type="number" step="any" id="{{ test }}" name="{{ test }}" value="{{ value }}" required></td>
                        <td data-label="Unit">{{ units[test] }}</td>
                        <td data-label="Reference Interval">{{ reference_ranges[test] }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <button type="submit">Analyze</button>
        </form>
    </div>
</body>
</html>




<h2 class="head" style="text-align: center; color: white; font-family: 'Arial', sans-serif; margin-bottom: 20px;">
    Health Advice Based on Your Report
</h2>
<div style="display: flex; justify-content: center; flex-direction: column; align-items: center; width: 100%; padding: 20px; background-color: black; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
    <ul style="list-style-type: none; padding: 0; width: 100%; max-width: 800px;">
        {% for adv in advice %}
        <li class="advice-item" style="margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; background-color: #1a1a1a; cursor: pointer; transition: box-shadow 0.3s ease;">
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 15px; background-color: #2c3e50; color: #ffffff;">
                <div class="advice-summary" style="font-weight: bold; font-size: 16px;">
                    {{ adv | extract_h2 | safe }}
                </div>
                <span style="font-size: 20px; color: #f1c40f;">💡</span>
            </div>
            <div class="advice-details" style="display: none; padding: 15px; font-size: 14px; line-height: 1.6; color: white;">
                <p class="preserve-whitespace" style="white-space: pre-wrap;">{{ adv | safe }}</p>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const adviceItems = document.querySelectorAll('.advice-item');
        adviceItems.forEach(function (item) {
            item.addEventListener('click', function () {
                const details = this.querySelector('.advice-details');
                if (details.style.display === 'none' || details.style.display === '') {
                    details.style.display = 'block';
                    this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.2)';
                } else {
                    details.style.display = 'none';
                    this.style.boxShadow = 'none';
                }
            });

            // Add hover effect
            item.addEventListener('mouseenter', function () {
                this.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.1)';
            });
            item.addEventListener('mouseleave', function () {
                if (this.querySelector('.advice-details').style.display !== 'block') {
                    this.style.boxShadow = 'none';
                }
            });
        });
    });
</script>

</body>
</html>
